<section id="invoice_info">
<h1> Invoice #<%=@invoice.id%> </h1>

<p> Status: <%= @invoice.status %> </p>
<p> Total Revenue: $<%= number_with_precision(@invoice.total_invoice_revenue_dollars, precision: 2, delimiter: ",") %>
<p> Invoice Date: <%= @invoice.created_at.strftime("%A, %B %d, %Y") %> </p>
<p> Customer: <%= @invoice.customer.first_name %> <%= @invoice.customer.last_name %> </p>
<p> <%= render partial: 'update_item_status', locals: { path: admin_invoice_path(@invoice), method: :patch, options_array: options_for_select(["In Progress", "Completed", "Cancelled"], @invoice.status), button_text: 'Submit' } %> </p>
</section>




<br>
<br>

<section id="all_invoice_items">
<% @invoice_items.each do |ii| %>
<div id="inv_item_<%=ii.id %>">   
  <h3> Item: <%= ii.item.name %> </h3>
  <p> Quantity Ordered: <%= ii.quantity %> </p>
  <p> Unit Price $<%= number_with_precision(ii.item.current_price, precision: 2, delimiter: ",") %> </p>
  <p> Item Status: <%= ii.status %> </p>
</div>

<% end %>

<h4 id ='total_revenue'>
  Total Revenue: $<%= number_with_precision ((@invoice.admin_total_invoice_revenue.to_f) / 100), precision: 2, delimiter: "," %>
</h4>
<% if @invoice.any_discounts? %>
  <h4 id ='total_disco_revenue'>
    Total Discounted Revenue: $<%= number_with_precision ((@invoice.admin_total_discounted_revenue.to_f) / 100), precision: 2, delimiter: "," %>
  </h4>
<%  else %>
  <h4>No Bulk Discounts Applied</h4>
<% end%>

</section>

